(()=>{"use strict";var e,l={935:(e,l,t)=>{const n=Vue;var a={class:"w-full flex flex-row justify-between px-3 py-3"},i=(0,n.createElementVNode)("h1",{class:"text-center text-3xl text-gray-500 font-light"},"Метрики",-1),s=["disabled"],o={class:"w-full flex flex-col flex-wrap justify-center items-between px-4 py-4 gap-2"},r={class:"w-full flex flex-wrap justify-start items-start gap-6"},u={class:"w-full flex flex-wrap justify-start items-start gap-6"},c={class:"w-full flex flex-wrap justify-start items-start gap-6"},d={class:"w-full flex flex-wrap justify-start items-start gap-6"},v={class:"w-full flex flex-wrap justify-start items-start gap-6"},f=(0,n.createElementVNode)("div",{class:"w-full flex justify-center items-center mt-8"},[(0,n.createElementVNode)("h1",{class:"text-center text-3xl text-gray-500 font-light"},"Меню")],-1),m={style:{"flex-basis":"25%","max-width":"30%"}},p={class:"text-lg text-gray-500 font-normal"};var x={class:"flex justify-start items-center"},h={class:"text-xl font-semibold"};var g={class:"flex flex-col p-5"},y={class:"text-lg text-gray-500 font-normal"},w={class:"w-full flex justify-start items-start"},b=(0,n.createElementVNode)("div",{class:"w-full bg-gray-300 mr-2",style:{height:"1px"}},null,-1),N={key:0,class:"text-xs text-gray-400 font-normal pr-4"};const V={name:"Block",props:{title:{type:String},description:{type:String,default:"This is a value block's description."}},data:function(){return{metrics:null}}};var k=t(744);const E={name:"ValueBlock",components:{Block:(0,k.Z)(V,[["render",function(e,l,t,a,i,s){var o,r;return(0,n.openBlock)(),(0,n.createElementBlock)("div",g,[(0,n.createElementVNode)("h1",y,(0,n.toDisplayString)(null!==(o=t.title)&&void 0!==o?o:""),1),(0,n.createElementVNode)("div",w,[(0,n.renderSlot)(e.$slots,"default")]),b,(null===(r=t.description)||void 0===r?void 0:r.length)>0?((0,n.openBlock)(),(0,n.createElementBlock)("p",N,(0,n.toDisplayString)(t.description),1)):(0,n.createCommentVNode)("",!0)])}]])},props:{value:{type:String},title:{type:String},description:{type:String,default:null}}},B={components:{ValueBlock:(0,k.Z)(E,[["render",function(e,l,t,a,i,s){var o=(0,n.resolveComponent)("Block");return(0,n.openBlock)(),(0,n.createBlock)(o,{title:t.title,description:t.description},{default:(0,n.withCtx)((function(){var e;return[(0,n.createElementVNode)("div",x,[(0,n.createElementVNode)("span",h,(0,n.toDisplayString)(null!==(e=t.value)&&void 0!==e?e:"--"),1)])]})),_:1},8,["title","description"])}]])},props:["card"],data:function(){return{metrics:null,isFetching:!1}},computed:{summary:function(){var e,l;return null!==(e=null===(l=this.metrics)||void 0===l?void 0:l.summary)&&void 0!==e?e:null},banquets:function(){var e,l;return null!==(e=null===(l=this.summary)||void 0===l?void 0:l.banquets)&&void 0!==e?e:{amount:null}},guests:function(){var e,l;return null!==(e=null===(l=this.summary)||void 0===l?void 0:l.guests)&&void 0!==e?e:{adults:null,children:null,total:null}},totals:function(){var e,l;return null!==(e=null===(l=this.summary)||void 0===l?void 0:l.totals)&&void 0!==e?e:{total:null,actual_total:null,tickets_total:null,metrics:{difference:null,percentage:null}}},sales:function(){var e,l;return null!==(e=null===(l=this.summary)||void 0===l?void 0:l.sales)&&void 0!==e?e:{menus:null,products:null}},menuSales:function(){var e,l;return null!==(e=null===(l=this.sales)||void 0===l?void 0:l.menus)&&void 0!==e?e:null},productSales:function(){var e,l;return null!==(e=null===(l=this.sales)||void 0===l?void 0:l.products)&&void 0!==e?e:null}},methods:{splitOnChunks:function(e,l){for(var t=[],n=0;n<e.length;n+=l)t.push(e.slice(n,n+l));return t},fetchMetrics:function(e){var l=this,t="/nova-vendor/metrics-card/full?restaurant_id=".concat(e);this.isFetching=!0,Nova.request().get(t).then((function(e){l.metrics=e.data,l.isFetching=!1}))},onFetch:function(){this.isFetching||this.fetchMetrics(1)}},mounted:function(){this.fetchMetrics(1)}},S=(0,k.Z)(B,[["render",function(e,l,t,x,h,g){var y=(0,n.resolveComponent)("ValueBlock"),w=(0,n.resolveComponent)("card",!0);return(0,n.openBlock)(),(0,n.createBlock)(w,{class:"container h-auto w-full flex flex-col"},{default:(0,n.withCtx)((function(){var e,t,x,w,b,N,V,k,E,B,S,O,_,j,C,F,q,D,M,Z,L,P,I,T;return[(0,n.createElementVNode)("div",a,[i,(0,n.createElementVNode)("button",{class:"flex-shrink-0 shadow rounded focus:outline-none ring-primary-200 dark:ring-gray-600 focus:ring bg-primary-500 hover:bg-primary-400 active:bg-primary-600 text-white dark:text-gray-800 inline-flex items-center font-bold px-4 h-9 text-sm flex-shrink-0",disabled:h.isFetching,onClick:l[0]||(l[0]=function(){return g.onFetch&&g.onFetch.apply(g,arguments)})},(0,n.toDisplayString)(h.isFetching?"Завантаження...":"Завантажити"),9,s)]),(0,n.createElementVNode)("div",o,[(0,n.createElementVNode)("div",r,[(0,n.createVNode)(y,{class:"flex-grow",style:{"flex-basis":"25%","max-width":"30%"},value:null!==(e=g.banquets.amount)&&void 0!==e?e:null,title:"Банкети",description:"Кількість банкетів у станах: новий, підтверджений та завершений"},null,8,["value"])]),(0,n.createElementVNode)("div",u,[(0,n.createVNode)(y,{class:"flex-grow",style:{"flex-basis":"25%","max-width":"30%"},value:null!==(t=g.guests.total)&&void 0!==t?t:null,title:"Гості",description:"Кількість гостів (діти + дорослі)"},null,8,["value"]),(0,n.createVNode)(y,{class:"flex-grow",style:{"flex-basis":"25%","max-width":"30%"},value:null!==(x=g.guests.adults)&&void 0!==x?x:null,title:"Дорослі",description:"Кількість дорослих"},null,8,["value"]),(0,n.createVNode)(y,{class:"flex-grow",style:{"flex-basis":"25%","max-width":"30%"},value:null!==(w=g.guests.children)&&void 0!==w?w:null,title:"Діти",description:"Кількість дітей"},null,8,["value"])]),(0,n.createElementVNode)("div",c,[(0,n.createVNode)(y,{class:"flex-grow",style:{"flex-basis":"25%","max-width":"30%"},value:null!==(b=g.totals.total)&&void 0!==b?b:null,title:"Вартість",description:"Загальна вартість усіх банкетів (розрахована по замовленим у системі позиціям + вартість квитків)"},null,8,["value"]),(0,n.createVNode)(y,{class:"flex-grow",style:{"flex-basis":"25%","max-width":"30%"},value:null!==(N=g.totals.actual_total)&&void 0!==N?N:null,title:"Фактична вартість",description:"Загальна фактична вартість усіх банкетів (введена вручну працівниками закладу, при відсутності цього значення використовується вартість)"},null,8,["value"]),(0,n.createVNode)(y,{class:"flex-grow",style:{"flex-basis":"25%","max-width":"30%"},value:null!==(V=g.totals.tickets_total)&&void 0!==V?V:null,title:"Вартість квитків",description:"Загальна вартість квитків усіх банкетів"},null,8,["value"])]),(0,n.createElementVNode)("div",d,[(0,n.createVNode)(y,{class:"flex-grow",style:{"flex-basis":"25%","max-width":"30%"},value:null!==(k=null===(E=g.totals)||void 0===E||null===(E=E.metrics)||void 0===E?void 0:E.difference)&&void 0!==k?k:null,title:"Різниця вартостей",description:"Різниця вартостей = Фактична Вартість - Вартість"},null,8,["value"]),(0,n.createVNode)(y,{class:"flex-grow",style:{"flex-basis":"25%","max-width":"30%"},value:null!==(B=null===(S=g.totals)||void 0===S||null===(S=S.metrics)||void 0===S?void 0:S.percentage)&&void 0!==B?B:null,title:"Відсоткова різниця",description:"Відсоткова різниця = Різниця вартостей / Вартість"},null,8,["value"]),(0,n.createVNode)(y,{class:"flex-grow",style:{"flex-basis":"25%","max-width":"30%"},value:null!==(O=g.totals)&&void 0!==O&&O.actual_total&&null!==(_=g.banquets)&&void 0!==_&&_.amount?Math.round(100*((null===(j=g.totals)||void 0===j?void 0:j.actual_total)/(null===(C=g.banquets)||void 0===C?void 0:C.amount)+Number.EPSILON))/100:null,title:"Середній вартість",description:"Середній вартість = Фактична вартість / Банкети"},null,8,["value"])]),(0,n.createElementVNode)("div",v,[(0,n.createVNode)(y,{class:"flex-grow",style:{"flex-basis":"25%","max-width":"30%"},value:null!==(F=null===(q=g.totals)||void 0===q||null===(q=q.metrics)||void 0===q?void 0:q.difference)&&void 0!==F?F:null,title:"Різниця вартостей",description:"Різниця вартостей = Фактична Вартість - Вартість"},null,8,["value"]),(0,n.createVNode)(y,{class:"flex-grow",style:{"flex-basis":"25%","max-width":"30%"},value:null!==(D=null===(M=g.totals)||void 0===M||null===(M=M.metrics)||void 0===M?void 0:M.percentage)&&void 0!==D?D:null,title:"Відсоткова різниця",description:"Відсоткова різниця = Різниця вартостей / Вартість"},null,8,["value"]),(0,n.createVNode)(y,{class:"flex-grow",style:{"flex-basis":"25%","max-width":"30%"},value:null!==(Z=g.totals)&&void 0!==Z&&Z.actual_total&&null!==(L=g.banquets)&&void 0!==L&&L.amount?Math.round(100*((null===(P=g.totals)||void 0===P?void 0:P.actual_total)/(null===(I=g.banquets)||void 0===I?void 0:I.amount)+Number.EPSILON))/100:null,title:"Середній вартість",description:"Середній вартість = Фактична вартість / Банкети"},null,8,["value"])]),null!==(T=g.menuSales)&&void 0!==T&&T.length?((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:0},[f,((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(g.menuSales,(function(e){var l,t,a;return(0,n.openBlock)(),(0,n.createElementBlock)("div",{class:"w-full flex flex-wrap justify-start items-start gap-6",key:null==e?void 0:e.id},[(0,n.createElementVNode)("div",m,[(0,n.createElementVNode)("span",p,(0,n.toDisplayString)(null!==(l=null==e?void 0:e.title)&&void 0!==l?l:null),1)]),(0,n.createVNode)(y,{class:"flex-grow",style:{"flex-basis":"25%","max-width":"30%"},value:null!==(t=null==e?void 0:e.amount)&&void 0!==t?t:null,title:"Продажі"},null,8,["value"]),(0,n.createVNode)(y,{class:"flex-grow",style:{"flex-basis":"25%","max-width":"30%"},value:null!==(a=null==e?void 0:e.total)&&void 0!==a?a:null,title:"На суму"},null,8,["value"])])})),128))],64)):(0,n.createCommentVNode)("",!0)])]})),_:1})}]]);Nova.booting((function(e,l){e.component("metrics-card",S)}))},962:()=>{},744:(e,l)=>{l.Z=(e,l)=>{const t=e.__vccOpts||e;for(const[e,n]of l)t[e]=n;return t}}},t={};function n(e){var a=t[e];if(void 0!==a)return a.exports;var i=t[e]={exports:{}};return l[e](i,i.exports,n),i.exports}n.m=l,e=[],n.O=(l,t,a,i)=>{if(!t){var s=1/0;for(c=0;c<e.length;c++){for(var[t,a,i]=e[c],o=!0,r=0;r<t.length;r++)(!1&i||s>=i)&&Object.keys(n.O).every((e=>n.O[e](t[r])))?t.splice(r--,1):(o=!1,i<s&&(s=i));if(o){e.splice(c--,1);var u=a();void 0!==u&&(l=u)}}return l}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[t,a,i]},n.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),(()=>{var e={440:0,458:0};n.O.j=l=>0===e[l];var l=(l,t)=>{var a,i,[s,o,r]=t,u=0;if(s.some((l=>0!==e[l]))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(r)var c=r(n)}for(l&&l(t);u<s.length;u++)i=s[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},t=self.webpackChunkandriichello_metrics=self.webpackChunkandriichello_metrics||[];t.forEach(l.bind(null,0)),t.push=l.bind(null,t.push.bind(t))})(),n.O(void 0,[458],(()=>n(935)));var a=n.O(void 0,[458],(()=>n(962)));a=n.O(a)})();